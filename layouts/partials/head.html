<meta charset="utf-8" />
<title>{{ .Site.Title }}</title>
{{ partial "meta.html" . }}
{{ block "meta" . }}{{ end }}


<link rel="canonical" href="{{ .Permalink }}" />

<!-- load custom and main css files -->
{{ $options := (dict "outputStyle" "compressed" "transpiler" "dartsass") }}
{{ $mainstyle := resources.Get "css/styles.scss" | resources.ToCSS $options }}
{{ $styles := $mainstyle }}

{{ if resources.Get "css/custom.scss" }}
  {{ $customstyle := resources.Get "css/custom.scss" | resources.ToCSS $options }}
  {{ $styles = slice $mainstyle $customstyle | resources.Concat "css/bundle.css" }}
{{ end }}


<link
  crossorigin="anonymous"
  href="{{ $styles.Permalink }}"
  rel="preload stylesheet"
  as="style"
/>

<!-- load Google Fonts -->
{{ $fonts := .Site.Params.googlefonts | default .Site.Params.defaultGoogleFonts }}
{{ if $fonts }}
  <link
    href="{{ $fonts }}"
    rel="preload stylesheet"
    as="style"
    media="print"
    onload="this.media='all'"
  />
{{ end }}


<!-- load Mathjax -->
{{ if .Page.Params.mathPosts | default false }}
  <script>
    MathJax = {
      tex: {
        inlineMath: [
          ["$", "$"],
          ["\\(", "\\)"],
        ],
        tags: "ams",
        processEscapes: true,
      },
      svg: {
        fontCache: "global",
      },
    };
  </script>
  <script
    id="MathJax-script"
    async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
  ></script>
{{ end }}


<!-- fontawesome -->
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/fontawesome.min.css"
  integrity="sha512-B46MVOJpI6RBsdcU307elYeStF2JKT87SsHZfRSkjVi4/iZ3912zXi45X5/CBr/GbCyLx6M1GQtTKYRd52Jxgw=="
  crossorigin="anonymous"
  referrerpolicy="no-referrer"
/>
<link
  rel="preload stylesheet"
  as="style"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/brands.min.css"
  integrity="sha512-EJp8vMVhYl7tBFE2rgNGb//drnr1+6XKMvTyamMS34YwOEFohhWkGq13tPWnK0FbjSS6D8YoA3n3bZmb3KiUYA=="
  crossorigin="anonymous"
  referrerpolicy="no-referrer"
/>
<link
  rel="preload stylesheet"
  as="style"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/solid.min.css"
  integrity="sha512-/r+0SvLvMMSIf41xiuy19aNkXxI+3zb/BN8K9lnDDWI09VM0dwgTMzK7Qi5vv5macJ3VH4XZXr60ip7v13QnmQ=="
  crossorigin="anonymous"
  referrerpolicy="no-referrer"
/>

{{/* load Bootstrap */}}
<link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
  rel="preload stylesheet"
  as="style"
  integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
  crossorigin="anonymous"
/>
<script
  async
  src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
  integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
  crossorigin="anonymous"
></script>
<script
  async
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
  integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
  crossorigin="anonymous"
></script>

{{/* Color theme settings with Bootstrap */}}
<script>
  (function () {
    var getStoredTheme = function () {
      return localStorage.getItem("theme");
    };
    var getPreferredTheme = function () {
      var storedTheme = getStoredTheme();
      if (storedTheme) {
        return storedTheme;
      }
      return window.matchMedia("(prefers-color-scheme: dark)").matches
        ? "dark"
        : "light";
    };
    var theme = getPreferredTheme();
    document.documentElement.setAttribute("data-bs-theme", theme);
  })();
</script>
{{ $tsCommonOpt := dict "minify" "true" }}
{{ with resources.Get "ts/color-module.ts" | js.Build $tsCommonOpt | fingerprint }}
  <script
    defer
    type="text/javascript"
    src="{{ .RelPermalink }}"
    integrity="{{ .Data.Integrity }}"
  ></script>
{{ end }}

{{/* load Instant search for Algolia */}}
{{ if .Site.Params.EnableAlgolia | default false }}
  <link
    rel="preload stylesheet"
    as="style"
    href="https://cdn.jsdelivr.net/npm/instantsearch.css@8.3.0/themes/satellite-min.css"
    integrity="sha256-Qn2jMxB0SkFi+WAf540nGb5LBaVTyjVQLqPNaNjduio="
    crossorigin="anonymous"
  />

  {{ with .Site.Params.Algolia }}
    {{ $tsCommonOpt :=
      dict "params" (dict
      "indexName" .indexName
      "appId" .appId
      "algoliaSearchApiKey" .searchOnlyApiKey)
    }}

    {{ $compiledJs := resources.Get "ts/algolia.ts" | js.Build $tsCommonOpt | resources.Minify | fingerprint }}
    <script
      defer
      type="text/javascript"
      src="{{ $compiledJs.RelPermalink }}"
      crossorigin="anonymous"
      integrity="{{ .Data.Integrity }}"
    ></script>
  {{ end }}
{{ end }}
